-- ========================================
-- ü©∏ CATHUD MOBILE - FIX FINAL DE INTERFACE
-- ========================================

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Limpa vers√µes bugadas
for _, old in pairs(playerGui:GetChildren()) do
    if old.Name == "CATHUD_V4" then old:Destroy() end
end

local gui = Instance.new("ScreenGui")
gui.Name = "CATHUD_V4"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.DisplayOrder = 999
gui.Parent = playerGui

-- 1. √çCONE DE ABRIR
local icon = Instance.new("TextButton")
icon.Size = UDim2.new(0.12, 0, 0.12, 0)
icon.Position = UDim2.new(0.02, 0, 0.4, 0)
icon.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
icon.Text = "ü©∏"
icon.TextScaled = true
icon.Parent = gui
Instance.new("UICorner", icon).CornerRadius = UDim.new(1, 0)

-- 2. PAINEL PRINCIPAL (Aumentado para caber tudo)
local main = Instance.new("Frame")
main.Size = UDim2.new(0.7, 0, 0.8, 0) -- Ocupa 70% da largura e 80% da altura
main.Position = UDim2.new(0.5, 0, 0.5, 0)
main.AnchorPoint = Vector2.new(0.5, 0.5)
main.BackgroundColor3 = Color3.fromRGB(20, 0, 0)
main.Visible = false
main.BorderSizePixel = 2
main.BorderColor3 = Color3.fromRGB(255, 0, 0)
main.Parent = gui
Instance.new("UICorner", main)

-- T√çTULO
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0.1, 0)
title.Text = "MENU CATHUD"
title.TextColor3 = Color3.new(1,0,0)
title.BackgroundTransparency = 1
title.TextScaled = true
title.Parent = main

-- CONT√äINER DE BOT√ïES (Garante que apare√ßam)
local content = Instance.new("Frame")
content.Size = UDim2.new(0.9, 0, 0.85, 0)
content.Position = UDim2.new(0.05, 0, 0.12, 0)
content.BackgroundTransparency = 1
content.Parent = main

local layout = Instance.new("UIListLayout", content)
layout.Padding = UDim.new(0, 8) -- Espa√ßo entre itens
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- FUN√á√ÉO PARA CRIAR ITENS
local function createBtn(name, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0.15, 0) -- Altura fixa proporcional
    btn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
    btn.Text = name
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.TextScaled = true
    btn.Parent = content
    btn.MouseButton1Click:Connect(callback)
    Instance.new("UICorner", btn)
end

local function createSlider(name, min, max, start, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0.15, 0)
    frame.BackgroundTransparency = 1
    frame.Parent = content

    local lab = Instance.new("TextLabel")
    lab.Size = UDim2.new(1, 0, 0.5, 0)
    lab.Text = name .. ": " .. start
    lab.TextColor3 = Color3.new(1,1,1)
    lab.BackgroundTransparency = 1
    lab.TextScaled = true
    lab.Parent = frame

    local bar = Instance.new("Frame")
    bar.Size = UDim2.new(0.8, 0, 0.2, 0)
    bar.Position = UDim2.new(0.1, 0, 0.6, 0)
    bar.BackgroundColor3 = Color3.new(0.2, 0, 0)
    bar.Parent = frame

    local dot = Instance.new("Frame")
    dot.Size = UDim2.new(0, 20, 1.5, 0)
    dot.AnchorPoint = Vector2.new(0.5, 0.5)
    dot.Position = UDim2.new((start-min)/(max-min), 0, 0.5, 0)
    dot.BackgroundColor3 = Color3.new(1,0,0)
    dot.Parent = bar

    -- L√≥gica de toque para Slider
    local function move(input)
        local p = math.clamp((input.Position.X - bar.AbsolutePosition.X) / bar.AbsoluteSize.X, 0, 1)
        dot.Position = UDim2.new(p, 0, 0.5, 0)
        local v = math.floor(min + (max-min)*p)
        lab.Text = name .. ": " .. v
        callback(v)
    end

    bar.InputBegan:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.Touch or i.UserInputType == Enum.UserInputType.MouseButton1 then
            move(i)
            local con; con = UIS.InputChanged:Connect(function(m)
                if m.UserInputType == Enum.UserInputType.Touch or m.UserInputType == Enum.UserInputType.MouseMovement then move(m) end
            end)
            UIS.InputEnded:Connect(function(e) con:Disconnect() end)
        end
    end)
end

-- ADICIONANDO TUDO (ESTA ORDEM APARECER√Å NA TELA)
createBtn("ATIVAR FLY (VOAR)", function()
    -- L√≥gica de Fly
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:WaitForChild("HumanoidRootPart")
    if not root:FindFirstChild("FlyV") then
        local bv = Instance.new("BodyVelocity", root)
        bv.Name = "FlyV"
        bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        RunService:BindToRenderStep("FlyLoop", 1, function()
            bv.Velocity = workspace.CurrentCamera.CFrame.LookVector * 100
        end)
    else
        root.FlyV:Destroy()
        RunService:UnbindFromRenderStep("FlyLoop")
    end
end)

createBtn("NOCLIP (ATRAVESSAR)", function()
    local n = true
    RunService.Stepped:Connect(function()
        if player.Character then
            for _, v in pairs(player.Character:GetDescendants()) do
                if v:IsA("BasePart") then v.CanCollide = false end
            end
        end
    end)
end)

createSlider("VELOCIDADE ANDAR", 16, 250, 16, function(v) player.Character.Humanoid.WalkSpeed = v end)
createSlider("ALTURA PULO", 50, 400, 50, function(v) player.Character.Humanoid.JumpPower = v end)

-- Alternar visibilidade
icon.MouseButton1Click:Connect(function()
    main.Visible = not main.Visible
end)
