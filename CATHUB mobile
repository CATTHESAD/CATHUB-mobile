-- ========================================
-- ü©∏ CATHUD MOBILE FIX (VERS√ÉO EST√ÅVEL)
-- ========================================

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Espera o PlayerGui carregar completamente antes de iniciar
local playerGui = player:WaitForChild("PlayerGui")

-- ================= VARI√ÅVEIS =================
local flying = false
local noclip = false
local speed = 70
local walkSpeed = 16
local jumpPower = 50

-- ================= GUI PRINCIPAL =================
-- Criando a ScreenGui com DisplayOrder alto para ficar acima de tudo
local gui = Instance.new("ScreenGui")
gui.Name = "CATHUD_MOBILE_FIX"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true -- Faz a GUI ignorar a barra superior do Roblox
gui.DisplayOrder = 100 -- Garante que apare√ßa sobre outras interfaces
gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
gui.Parent = playerGui

-- √çCONE PARA ABRIR (Posi√ß√£o relativa em Scale para n√£o sumir)
local hudIcon = Instance.new("TextButton")
hudIcon.Size = UDim2.new(0.12, 0, 0.12, 0) -- Tamanho proporcional √† tela
hudIcon.Position = UDim2.new(0.05, 0, 0.2, 0)
hudIcon.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
hudIcon.Text = "ü©∏"
hudIcon.TextScaled = true
hudIcon.Parent = gui
Instance.new("UICorner", hudIcon).CornerRadius = UDim.new(1, 0)

-- MENU PRINCIPAL (Usando Scale para responsividade total)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0.7, 0, 0.6, 0) -- 70% da largura e 60% da altura
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 0, 0)
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.Parent = gui

local uiCorner = Instance.new("UICorner", mainFrame)
uiCorner.CornerRadius = UDim.new(0.05, 0)

-- T√çTULO
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0.2, 0)
title.BackgroundTransparency = 1
title.Text = "ü©∏ CATHUD MOBILE"
title.TextColor3 = Color3.new(1, 0, 0)
title.TextScaled = true
title.Parent = mainFrame

-- ================= FUN√á√ïES FLY / NOCLIP =================
local function toggleFly()
    flying = not flying
    if flying then
        local root = player.Character:WaitForChild("HumanoidRootPart")
        local bv = Instance.new("BodyVelocity", root)
        bv.Name = "FlyVelocity"
        bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        
        RunService:BindToRenderStep("FlyStep", 1, function()
            local cam = workspace.CurrentCamera
            bv.Velocity = cam.CFrame.LookVector * speed
        end)
    else
        RunService:UnbindFromRenderStep("FlyStep")
        if player.Character.HumanoidRootPart:FindFirstChild("FlyVelocity") then
            player.Character.HumanoidRootPart.FlyVelocity:Destroy()
        end
    end
end

-- BOT√ïES DE ATIVA√á√ÉO
local function createBtn(name, pos, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.4, 0, 0.2, 0)
    btn.Position = pos
    btn.Text = name
    btn.TextScaled = true
    btn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Parent = mainFrame
    btn.MouseButton1Click:Connect(callback)
    Instance.new("UICorner", btn)
end

createBtn("FLY", UDim2.new(0.05, 0, 0.4, 0), toggleFly)
createBtn("NOCLIP", UDim2.new(0.55, 0, 0.4, 0), function()
    noclip = not noclip
    RunService.Stepped:Connect(function()
        if noclip and player.Character then
            for _, v in pairs(player.Character:GetDescendants()) do
                if v:IsA("BasePart") then v.CanCollide = false end
            end
        end
    end)
end)

-- INTERA√á√ÉO DO √çCONE
hudIcon.MouseButton1Click:Connect(function()
    mainFrame.Visible = not mainFrame.Visible
end)
